# Plug-in для интеграции Node-RED и LOOKin remote

## Установка 
1. Скачайте и установите глобально npm пакет по ссылке в репозитории npm -i -g node-red-contrib-lookin
2. В файле package.json расположенном в папке .node-red (как правило, она находится в каталоге пользователя)
   должна появиться подобная запись:  
   "dependencies": {  
   "@types/node-red": "^1.2.0",  
   "node-red-contrib-lookin": "file:../../../node-red-contrib-LOOKin",  
   }
3. Запустите Node-RED. В меню слева после стандартного набора нод должна появиться вкладка LOOKin.

## Использование плагина

1. В любое место рабочей области Node-RED нужно добавить ноду Master. Она необходима для установления связи с пультом LOOKin.
   Никаких дополнительных манипуляций с ней производить не требуется.
2. Для добавления Ваших сохранённых пультов поместите в рабочую область Node-RED ноду с названием Node для любого типа устройств, кроме кондиционера - для него существует отдельная нода Air Conditioner.
3. Если версия Вашего LOOKin remote 2.0 и выше - Вы также можете использовать ноду Meteo Sensors для получения показаний датчиков температуры и влажности.
4. Для нод типа Node и Air Conditioner необходимо указать UUID пульта, его можно узнать в настройках пульта в приложении LOOKin. Название можно выбрать произвольное.
5. Для отправки команд пультам используется стандартная нода Inject из вкладки Common в меню слева.
В настройках ноды Inject нужно в поле msg.payload ввести текст отправляемой команды из списка ниже.     
Для получения информации от датчиков можно воспользоваться стандартной нодой Debug.

> Список доступных команд для всех пультов кроме кондиционера (Node) 
>> power | power_on | power_off - управление питанием  
> mode | mode_1 | mode_2 | mode_3 | mode_4 - режимы работы TV и медиа-устройства  
> mute | vol_up | vol_down - управление громкостью  
> ch_up | ch_down - переключение каналов TV  
> swing | swing_1 | swing_2 - режимы вращения вентилятора  
> speed | speed_up | speed_down - управление скоростью вращения вентилятора  
> select | menu | arrow_up | arrow_down | arrow_left | arrow_right - курсор TV  

> Список доступных команд для кондиционера:
>> off | auto | cool | heat | dry | fan_only - режимы работы кондиционера
> fan_auto | fan_low | fan_mid | fan_high - скорость воздушного потока кондиционера  
> temp_16 | ... | temp_31 - температура, значение после temp_ должно быть в диапазоне 16-31 (в градусах Цельсия)  
> stop | move - подвижность шторок кондиционера  

6. После настройки необходимых взаимосвязей между Вашими нодами, нажмите Deploy в правом верхнем углу окна Node-RED
Через некоторое время под нодой Master должен загореться зелёный индикатор "connected" что означает установление связи с пультом LOOKin.  
Также будут отображаться статусы нод, показывающие текущее состояние сохранённых в LOOKin пультов, которые Вы добавили в рабочую область Node-RED.  
   
